---
name:  gamljGlmMixed
title: Generalized Mixed Model
jrs: '1.0'

items:

  - name: model
    type: Property
    description: The underlying `lmer` object

  - name: info
    title: Model Info
    type: Table
    columns:
       - name: info
         type: text
         title: "Info"
       - name: value
         type: text
         title: ""
       - name: specs
         type: text
         title: ""
         
    clearWith:
        - dep
        - dep_scale
        - randomTerms
        - modelTerms
        - fixedIntercept

    refs: gamlj


  - name: main
    type: Group
    title: Model Results
    items:
    
           - name: r2
             title: Model Fit
             type: Table
             description: a table of R
             clearWith:
                              - dep
                              - modelTerms
                              - reml
                              - scaling
                              - dep_scale
                              - randomTerms
                              - correlatedEffects
                              - fixedIntercept
                              - dfmethod

             columns:
                    - name: type
                      title: Type
                      type: text
                    - name: r2
                      title: R²
                      type: number

                    - name:  df
                      title: df
                      type: integer
                    - name: test
                      title: LRT
                      type: number
                    - name: p
                      title: p
                      type: number
                      format: zto,pvalue
           - name: fit
             title: Additional indices
             type: Table
             visible: true
             columns:
                    - name: info
                      type: text
                      title: "Info"
                    - name: value
                      type: text
                      title: "Value"
                    - name: specs
                      type: text
                      title: "Comment"
             clearWith:
                  - dep
                  - factors
                  - cov
                  - modelTerms
                  - fixedIntercept
  

    
           - name: anova
             title: Fixed Effect Omnibus tests
             type: Table
             description: a table of ANOVA results
             clearWith:
                         - dep
                         - modelTerms
                         - reml
                         - contrasts
                         - scaling
                         - dep_scale
                         - randomTerms
                         - correlatedEffects
                         - fixedIntercept
                         - dfmethod

             columns:
                    - name: name
                      title: ""
                      type: text
                    - name: f
                      title: F
                      type: number
                    - name: chisq
                      title:  X²
                      type: number
                      visible: false
                    - name: df1
                      title: Num df
                      type: number
                    - name: df2
                      title: Den df
                      type: number
                    - name: p
                      title: p
                      type: number
                      format: zto,pvalue

           - name: coefficients
             title: Fixed Effects Parameter Estimates
             type: Table
             clearWith:
                    - dep
                    - modelTerms
                    - reml
                    - contrasts
                    - scaling
                    - dep_scale
                    - randomTerms
                    - correlatedEffects
                    - fixedIntercept
                    - paramCIWidth

             columns:
                    - name: source
                      title: "Names"
                      type: text
                      visible: (show_contrastnames)
                    - name: label
                      title: "Effect"
                      type: text
                    - name: estimate
                      title: "Estimate"
                      type: number
                    - name: se
                      title: "SE"
                      type: number
                    - name: ci.lower
                      type: number
                      title: Lower
                      visible: (showParamsCI)
                    - name: ci.upper
                      type: number
                      title: Upper
                      visible: (showParamsCI)
                    - name: df
                      title: "df"
                      type: number
                    - name: t
                      title: "t"
                      type: number
                    - name: p
                      title: "p"
                      type: number
                      format: zto,pvalue


           - name: random
             title: Random Components
             type: Table
             clearWith:
                    - dep
                    - modelTerms
                    - reml
                    - contrasts
                    - scaling
                    - dep_scale
                    - randomTerms
                    - correlatedEffects
                    - fixedIntercept
                    - randomTerms
                    - ciRe

             columns:
                    - name: groups
                      title: "Groups"
                      type: text
                      combineBelow: true
                    - name: name
                      title: "Name"
                      type: text
                    - name: std
                      title: "SD"
                      type: number
                    - name: var
                      title: "Variance"
                      type: number
                    - name: ci.lower
                      type: number
                      title: Lower
                      visible: (ciRE)
                    - name: ci.upper
                      type: number
                      title: Upper
                      visible: (ciRE)
                    - name: icc
                      title: "ICC"
                      type: number

           - name: randomCov
             title: Random Parameters correlations
             type: Table
             visible: false
             clearWith:
                    - dep
                    - modelTerms
                    - reml
                    - contrasts
                    - scaling
                    - dep_scale
                    - randomTerms
                    - correlatedEffects
                    - fixedIntercept
                    - randomTerms
                    - ciRE

             columns:
                   - name: grp
                     title: "Groups"
                     combineBelow: true
                     type: text
                   - name: var1
                     title: "Param.1"
                     type: text
                   - name: var2
                     title: "Param.2"
                     type: text
                   - name: vcov
                     title: "Covar."
                     type: number
                   - name: ci.lower
                     type: number
                     title: Lower
                     visible: (ciRE)
                   - name: ci.upper
                     type: number
                     title: Upper
                     visible: (ciRE)
                   - name: sdcor
                     title: "Corr."
                     type: number

           - name: randomTests
             title: Random Coefficients LRT
             type: Table
             visible: (lrtRandomEffects)
             clearWith:
                    - dep
                    - modelTerms
                    - reml
                    - contrasts
                    - scaling
                    - dep_scale
                    - randomTerms
                    - correlatedEffects
                    - fixedIntercept
                    - randomTerms

             columns:
                   - name: test
                     title: "Test"
                     combineBelow: true
                     type: text
                   - name: npar
                     title: "N. par"
                     type: number
                   - name: AIC
                     title: "AIC"
                     type: number
                   - name: LRT
                     title: "LRT"
                     type: number
                   - name: Df
                     title: "df"
                     type: number
                   - name: Pr(>Chisq)
                     title: "p"
                     type: number
                     format: zto,pvalue

           - name: contrastCodeTables
             title: Contrast Coefficients 
             type: Array
             description: an array of contrast coefficients tables
             visible: (showContrastCode)
             clearWith:
                    - contrasts
             template:
                   title:  $key
                   type: Table
                   columns:
                         - name: rnames
                           title: 'Name'
                           type: text
                           visible: (showRealNames)
                         - name: clabs
                           title: 'Contrast'
                           type: text


  - name: posthoc
    title: Post Hoc Tests
    type: Array
    description: an array of post-hoc tables
    items: (posthoc)
    clearWith:
                 - dep
                 - modelTerms
                 - reml
                 - contrasts
                 - scaling
                 - dep_scale
                 - randomTerms
                 - correlatedEffects
                 - fixedIntercept
                 - simpleVariable
                 - simpleModerators
                 - simpleScale
                 - cvalue
                 - percvalue
                 - simpleScaleLabels
    template:
        title:  ""
        type: Table
        clearWith:
              - posthoc
  
        columns:
        - name: Response
          title: Response level
          type: text
          visible: (modelSelection:multinomial)
          combineBelow: true
        - name: estimate
          title: Difference
          type: number
        - name: se
          title: SE
          type: number
        - name: ci.lower
          type: number
          title: Lower
          visible: (showParamsCI)
        - name: ci.upper
          type: number
          title: Upper
          visible: (showParamsCI)
        - name: df
          title: df
          type: number

        - name: test
          title: t
          type: number
        - name: none
          title: p
          type: number
          format: zto,pvalue
          visible: (postHocCorr:none)
        - name: bonf
          title: p<sub>bonferroni</sub>
          type: number
          format: zto,pvalue
          visible: (postHocCorr:bonf)
        - name: tukey
          title: p<sub>tukey</sub>
          type: number
          format: zto,pvalue
          visible: (postHocCorr:tukey)
        - name: holm
          title: p<sub>holm</sub>
          type: number
          format: zto,pvalue
          visible: (postHocCorr:holm)




  - name: simpleEffects
    title: Simple Effects
    type: Group
    clearWith:
                 - dep
                 - modelTerms
                 - contrasts
                 - scaling
                 - dep_scale
                 - fixedIntercept
                 - simpleVariable
                 - simpleModerators
                 - simpleScale
                 - cvalue
                 - percvalue
                 - simpleScaleLabels

    items:
            - name: anova
              title: Simple Effects ANOVA
              type: Table
              description: a table of ANOVA for simple effects
              visible: false
              clearWith:
                 - dep
                 - modelTerms
                 - contrasts
                 - scaling
                 - fixedIntercept
                 - simpleVariable
                 - simpleModerators
                 - simpleScale
                 - cvalue
                 - percvalue
                 - simpleScaleLabels

              columns:
                 - name: test
                   title: F
                   type: number
                 - name: df1
                   title: df
                   type: number
                 - name: df2
                   title: dfe
                   type: number

                 - name: p
                   title: p
                   type: number
                   format: zto,pvalue

            - name: coefficients
              title: Parameter Estimates for simple effects
              type: Table
              visible: false
              clearWith:
                 - dep
                 - modelTerms
                 - contrasts
                 - scaling
                 - dep_scale
                 - fixedIntercept
                 - simpleVariable
                 - simpleModerators
                 - simpleScale
                 - cvalue
                 - percvalue
                 - simpleScaleLabels

              columns:
                     - name: contrast
                       title: "Effect"
                       type: text
                     - name: estimate
                       title: "Estimate"
                       type: number
                     - name: se
                       title: "SE"
                       type: number
                     - name: ci.lower
                       type: number
                       title: Lower
                       visible: (showParamsCI )
                     - name: ci.upper
                       type: number
                       title: Upper
                       visible: (showParamsCI )
                     - name: df
                       title: "df"
                       type: number
                     - name: test
                       title: "t"
                       type: number
                     - name: p
                       title: "p"
                       type: number
                       format: zto,pvalue


  - name: simpleInteractions
    title: Simple Interactions 
    type: Array
    description: an array of simple interactions tables
    visible: false
    clearWith:
        - dep
        - modelTerms
        - contrasts
        - scaling
        - dep_scale
        - fixedIntercept
        - simpleScaleLabels
        - ciWidth
        - emmeans

    template:
        title:  Simple Interactions - $key 
        type: Group
        clearWith: []
        items:
           - type: Table
             name: anova
             title: ANOVA test -  $key
             columns:
                   - name: effect
                     title: 'Effect'
                     type: text
                   - name: f
                     title: F
                     type: number
                   - name: df1
                     title: df
                     type: number
                   - name: df2
                     title: df
                     type: number

                   - name: p
                     title: p
                     type: number
                     format: zto,pvalue

           - type: Table
             name: coefficients
             title: Parameter Estimates for -  $key
             columns:
                   - name: effect
                     title: 'Effect'
                     type: text
                   - name: estimate
                     title: Estimate
                     type: number
                   - name: se
                     title: SE
                     type: number
                   - name: ci.lower
                     title: Lower 
                     type: number
                   - name: ci.upper
                     title: Upper
                     type: number
                   - name: t
                     title: t
                     type: number
                   - name: p
                     title: p
                     type: number
                     format: zto,pvalue



  - name: emmeans
    title: Estimated Marginal Means 
    type: Array
    description: an array of predicted means tables
    visible: false
    clearWith:
        - dep
        - modelTerms
        - contrasts
        - scaling
        - dep_scale
        - fixedIntercept
        - simpleScaleLabels
        - ciWidth
        - emmeans

    template:
        title:  Estimate Marginal Means - $key
        type: Table
        clearWith: []
        columns:
        - name: estimate
          title: 'Mean'
          type: number
        - name: se
          title: SE
          type: number
        - name: df
          title: df
          type: number
        - name: ci.lower
          title: Lower 
          type: number
        - name: ci.upper
          title: Upper
          type: number




  - name: mainPlots
    title: Results Plots
    type: Array
    description: an array of results plots
    template:
          title: ""
          type: Image
          renderFun: .mainPlot
          width: 600
          height: 400

          clearWith:
           - dep
           - plotHAxis
           - plotSepLines
           - plotSepPlots
           - plotError
           - ciWidth
           - scaling
           - dep_scale
           - modelTerms
           - fixedIntercept
           - simpleScale
           - simpleScaleLabels
           - plotDvScale
           - plotRaw
           - percvalue
           - cvalue
           - plotOriginalScale
           - plotRandomEffects
           - randomTerms
           - modelTerms

  - name: plotnotes
    type: Html
    visible: false

  - name: assumptions
    title: Assumption Checks
    type: Group
    items:
        - name: homoTest
          title: Test for Homogeneity of Residual Variances (Levene's)
          type: Table
          description: a table of homogeneity tests
          visible: (homoTest)
          rows: 1
          columns:
            - name: test
              type: number
              title: F

            - name: df1
              type: integer

            - name: df2
              type: integer

            - name: p
              type: number
              format: zto,pvalue
    
        - name: normTest
          title: Test for Normality of residuals
          type: Table
          description: a table of normality tests
          visible: (normTest)
          columns:
            - name: name
              title: Test
              type: number

            - name: test
              title: Statistics
              type: number
            - name: p
              type: number
              format: zto,pvalue

        - name: qqplot
          title: Q-Q Plot
          visible: (qqplot)
          type: Image
          description: a q-q plot
          width: 450
          height: 400
          renderFun: .qqPlot
          requiresData: true
          clearWith:
            - dep
            - modelTerms
        - name: normPlot
          title: Residual histogram
          visible: (normPlot)
          type: Image
          description: Residual histogram
          width: 450
          height: 400
          renderFun: .normPlot
          requiresData: true
          clearWith:
            - dep
            - modelTerms
            - dep_scale
          
        - name: residPlot
          title: Residual-Predicted Scatterplot
          visible: (residPlot)
          type: Image
          description: Residual Predicted plot
          width: 450
          height: 400
          renderFun: .residPlot
          requiresData: true
          clearWith:
            - dep
            - dep_scale
            - modelTerms

        - name: clusterResPred
          title: Residuals vs Predicted by cluster 
          type: Array
          description: Residuals vs Predicted by cluster
          visible: (clusterResPred)
          clearWith:
            - dep
            - dep_scale
            - modelTerms
          template:
             title: $key
             type: Image
             renderFun: .clusterResPred
             width: 450
             height: 400

        - name: clusterBoxplot
          title: Residuals by cluster boxplot
          type: Array
          description: Residuals boxplot by cluster
          visible: (clusterBoxplot)
          clearWith:
            - dep
            - dep_scale
            - modelTerms
          template:
             title: $key
             type: Image
             renderFun: .clusterBoxplot
             width: 450
             height: 400

        - name: randHist
          title: Random coefficients histogram
          type: Array
          description: an array of random coefficients histograms
          visible: (randHist)
          clearWith:
            - dep
            - dep_scale
            - modelTerms
          template:
             title: $key
             type: Image
             renderFun: .randHist
             width: 450
             height: 400

  - name: predicted
    title: Predicted Vales
    type: Output            
    varTitle: '`Mix_PRED_${ dep }`'
    varDescription: Predicted values
    clearWith:
        - dep
        - factors
        - covs
  - name: residuals
    title: Residuals Vales
    type: Output            
    varTitle: '`Mix_RES_${ dep }`'
    varDescription: Residuals values
    clearWith:
        - dep
        - factors
        - covs
